@using System.Collections;
@using WebApplication1.Controllers;

<h1>Quiz</h1>

@foreach (RimworldSubjectData subject in (IEnumerable<RimworldSubjectData>)ViewData["SubjectList"])
{
    <div class="col-4">

        <label for="passionRange_@subject.Name" class="form-label" style="color:white">How do you feel doing @subject.Name work?</label>

        <div class="d-flex justify-content-center align-items-center">
            <i class="bi-emoji-frown fs-3" style="color:white"></i>
            <input type="range" class="form-range  px-3" min="0" max="4" id="passionRange_@subject.Name" oninput="showVal(this.value,'@subject.Name')" onchange="showVal(this.value,'@subject.Name')">
            <i class="bi-emoji-smile fs-3" style="color:white"></i>
        </div>

        <p id="passionText_@subject.Name" class="d-flex justify-content-center align-items-center" style="color:white">I tolerate it.</p>


    </div>
}


<button type="button" class="btn btn-primary btn-lg" onclick="@("window.location.href='" + @Url.Action("FinishQuiz", "Home") + "'");">Finish</button>

<script>

    var subjArray = new Array();
    subjArray = @Html.Raw(Json.Serialize(ViewData["SubjectList"]));

    subjArray.forEach((subj) => document.getElementById('passionRange_' + subj.name).defaultValue = 1);

    //for(let i=0; i<subjArray.length;i++){
    //    document.getElementById('passionRange_' + subjArray[i].name).defaultValue = 1
    //}


    function showVal(newValue, subjectName) {
        var rangeText = document.getElementById('passionText_' + subjectName);

        var humanReadableText = "Something went wrong! You shouldn't see this. My bad.";
        switch (parseInt(newValue)) {
            case 0: humanReadableText = "I hate it!"; break;
            case 1: humanReadableText = "I tolerate it."; break;
            case 2: humanReadableText = "I enjoy it."; break;
            case 3: humanReadableText = "I love it!"; break;
            case 4: humanReadableText = "All else pales before it."; break;
        }

        rangeText.innerHTML = humanReadableText;
    }


</script>